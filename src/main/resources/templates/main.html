<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>í™ˆ</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
</head>
<body>
<div th:include="/include/header.html"></div>
<div class="container">
    <header>
        <div id="imageContainer">
            <img src="/image/main.webp" id="image1"/>
            <img src="/image/main_pic.webp" id="image2" style="display: none;"/>
        </div>
    </header>

    <section id="sec1">
        <div id="sec11">
            <button>
                <img src="/image/joinBtn.png"/>
            </button>
            <button>
                <img src="/image/carrotBtn.png"/>
            </button>
            <div id="sec11_3">
                <div id="user">
                    <div class="img_area" th:if="${session.member_id != null and session.member_profile != null}">
                        <!--ì•„ë˜ ì´ë¯¸ì§€ í˜¸ì¶œ test RestController í˜¸ì¶œ -> imgControllerë¡œ ë³€ê²½í•´ì•¼í•˜ëŠ” ë‚´ìš© -->
                        <img th:src="'/api/photo/' + ${member_info.profileInfo.uuid + '_' + member_info.profileInfo.fileName}"
                             alt="Member Photo">
                    </div>

                    <div class="img_area" th:unless="${session.member_id != null and session.member_profile != null}">
                        <img src="/image/pf_example.png"/>
                    </div>

                    <div class="user_info" th:if="${session.member_id != null and session.member_profile != null}">
                        <div> ì•ˆë…•í•˜ì„¸ìš” ì—¬í–‰ìë‹˜ &nbsp;: )</div>
                        <div>
                            <span class="user_name">[(${member_info.name})]ë‹˜</span>
                            &nbsp;| &nbsp;
                            <span class="user_mbti"> [(${member_info.profileInfo.travelType})]</span>
                        </div>
                        <div class="button_area">
                            <button class="myPageBtn">ë§ˆì´í˜ì´ì§€</button>
                            <form method="post" th:action="@{/member/logout}" style="display: inline;">
                                <button class="logoutBtn">ë¡œê·¸ì•„ì›ƒ</button>
                            </form>
                        </div>

                    </div>

                    <div class="user_info" th:if="${session.member_id != null and session.member_profile == null}">
                        <div> ì•ˆë…•í•˜ì„¸ìš” ì—¬í–‰ìë‹˜ &nbsp;: )</div>
                        <div>
                            <span class="user_name">[(${member_info.name})]ë‹˜</span>
                        </div>
                        <div class="button_area">
                            <button class="profileBtn">í”„ë¡œí•„ ë“±ë¡</button>
                            <form method="post" th:action="@{/member/logout}" style="display: inline;">
                                <button class="logoutBtn">ë¡œê·¸ì•„ì›ƒ</button>
                            </form>
                        </div>

                    </div>

                    <div class="user_info" th:if="${session.member_id == null}">
                        <div id="notLogin">
                            <div> ì•ˆë…•í•˜ì„¸ìš” ì—¬í–‰ìë‹˜ &nbsp;: )</div>
                            <div class="button_area">
                                <button class="loginBtn">ë¡œê·¸ì¸</button>
                                <button class="signupBtn">íšŒì›ê°€ì…</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="all_user">
                    <div id="all_user_title">
                        <span>ğŸ€ TRAVELMAKER ì—¬í–‰ìë“¤</span>
                    </div>
                    <div id="all_user_profile">
                        <!--                        <div class="profile_area">-->
                        <!--                            <div class="profile_img_area">-->
                        <!--                                <img src="/image/pf_example.png" />-->
                        <!--                            </div>-->
                        <!--                            <div class="profile_content_area">-->
                        <!--                                <span>ê¹€ì±„ë¦¼</span>-->
                        <!--                                <br>-->
                        <!--                                <span>20/ISFJ</span>-->
                        <!--                            </div>-->
                        <!--                        </div>-->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="sec2">
        <div>
            <p class="title">âœ¨ ì¸ê¸° ê²Œì‹œë¬¼</p>
        </div>
    </section>
</div>
<footer>
    <div></div>
</footer>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
    var currentImageIndex = 1; // ê¸°ë³¸ì ìœ¼ë¡œ ì²« ë²ˆì§¸ ì´ë¯¸ì§€ê°€ ë³´ì…ë‹ˆë‹¤.
    function toggleImages() {
        var image1 = document.getElementById('image1');
        var image2 = document.getElementById('image2');

        if (currentImageIndex === 1) {
            // ì´ë¯¸ì§€1ì´ ë³´ì´ë©´ ì´ë¯¸ì§€2ë¥¼ ë³´ì´ê²Œ í•©ë‹ˆë‹¤.
            image1.style.display = 'none';
            image2.style.display = 'block';
            currentImageIndex = 2;
        } else {
            // ì´ë¯¸ì§€2ê°€ ë³´ì´ë©´ ì´ë¯¸ì§€1ì„ ë³´ì´ê²Œ í•©ë‹ˆë‹¤.
            image1.style.display = 'block';
            image2.style.display = 'none';
            currentImageIndex = 1;
        }
    }
    document.getElementById('imageContainer').addEventListener('click', toggleImages);
</script>

<script>
    function toggleImages() {
        var image1 = document.getElementById('image1');
        var image2 = document.getElementById('image2');

        if (image1.style.display === 'block') {
            image1.style.display = 'none';
            image2.style.display = 'block';
        } else {
            image1.style.display = 'block';
            image2.style.display = 'none';
        }
    }

    // Call toggleImages function every 5 seconds
    setInterval(toggleImages, 5000);
</script>

<<script th:inline="javascript">
    var profiles = [
        {
            imgSrc: "/image/carrotBtn.png",
            name: "ê¹€ì±„ë¦¼",
            info: "20/ISFJ"
        }
    ];

    var otherMembers = /*[[${otherMembers}]]*/ '';

    for (var i = 0; i < otherMembers.length; i++) {
        var member = otherMembers[i]
        console.log(member.memberId)
        console.log('ë‚˜ì´: ', member.ageRange)
        console.log('ì´ë¦„: ', member.name)
        console.log('mbti: ', member.profileInfo.travelType)
        console.log('ì‚¬ì§„uuid: ', member.profileInfo.uuid)
        console.log('ì‚¬ì§„ì´ë¦„: ', member.profileInfo.fileName)

    }

    for (var i = 0; i < otherMembers.length; i++) {
        var member = otherMembers[i]
        // console.log(member.memberId)
        // console.log('ë‚˜ì´: ', member.ageRange)
        // console.log('ì´ë¦„: ', member.name)
        // console.log('mbti: ', member.profileInfo.travelType)
        // console.log('ì‚¬ì§„uuid: ', member.profileInfo.uuid)
        // console.log('ì‚¬ì§„ì´ë¦„: ', member.profileInfo.fileName)
        var profile = {
            memberId : member.memberId,
            imgSrc: "/api/photo/" + member.profileInfo.uuid +'_' + member.profileInfo.fileName, // ì´ë¯¸ì§€ ê²½ë¡œ
            name: member.name, // ì´ë¦„
            info: member.ageRange.slice(0, -1) + '/' + member.profileInfo.travelType // ì •ë³´ ì¡°í•©
        };
        profiles.push(profile); // profiles ë°°ì—´ì— ì¶”ê°€
    }

    function generateProfiles(profiles) {
        var profileContainer = document.getElementById('all_user_profile');

        profiles.forEach(function (profile) {
            var profileArea = document.createElement('div');
            profileArea.className = 'profile_area';

            var imgArea = document.createElement('div');
            imgArea.className = 'profile_img_area';
            var img = document.createElement('img');
            img.src = profile.imgSrc;
            imgArea.appendChild(img);

            var contentArea = document.createElement('div');
            contentArea.className = 'profile_content_area';
            var name = document.createElement('span');
            name.textContent = profile.name;
            var br = document.createElement('br');
            var info = document.createElement('span');
            info.textContent = profile.info;
            contentArea.appendChild(name);
            contentArea.appendChild(br);
            contentArea.appendChild(info);

            profileArea.appendChild(imgArea);
            profileArea.appendChild(contentArea);

            profileContainer.appendChild(profileArea);
        });
    }

    // Call the function with the profiles array
    generateProfiles(profiles);


    $(document).ready(function () {
        var profileContainer = $('#all_user_profile'); // í”„ë¡œí•„ ì»¨í…Œì´ë„ˆ
        var profileWidth = $('.profile_area').outerWidth(true); // í”„ë¡œí•„ í•˜ë‚˜ì˜ ë„ˆë¹„

        function slideProfiles() {
            profileContainer.animate({left: '-=' + profileWidth}, 500, function () {
                profileContainer.append(profileContainer.find('.profile_area:first'));
                profileContainer.css('left', '0');
            });
        }

        // í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
        profileContainer.on('click', '.profile_area', function() {
            var memberId = $(this).data('memberId'); // í´ë¦­ëœ í”„ë¡œí•„ì˜ memberIdë¥¼ ê°€ì ¸ì˜´
            console.log('Clicked member ID:', memberId);
        });

        setInterval(slideProfiles, 400);
    });

</script>

<!--ë©”ì¸ í˜ì´ì§€ í™”ë©´ì´ë™ ìŠ¤í¬ë¦½íŠ¸-->

<script>
    document.addEventListener("DOMContentLoaded", function() {
        var loginBtn = document.querySelector(".loginBtn");
        var signupBtn = document.querySelector(".signupBtn");

        loginBtn.addEventListener("click", function() {
            window.location.href = '/member/login';
        });

        signupBtn.addEventListener("click", function() {
            window.location.href = '/member/signUp';
        });
    });
    document.addEventListener("DOMContentLoaded", function() {
        var myPageBtn = document.querySelector(".myPageBtn");
        var logoutBtn = document.querySelector(".logoutBtn");
        var profileBtn = document.querySelector(".profileBtn");


        myPageBtn.addEventListener("click", function() {
            window.location.href = '/member/myPage';
        });

        logoutBtn.addEventListener("click", function() {
            document.getElementById('logoutForm').submit();
        });

        profileBtn.addEventListener("click", function() {
            window.location.href = '/member/profile';
        });

    });

    document.addEventListener("DOMContentLoaded", function() {
        var profileBtn = document.querySelector(".profileBtn");

        profileBtn.addEventListener("click", function() {
            window.location.href = '/member/profile';
        });

    });
</script>

</body>
</html>
